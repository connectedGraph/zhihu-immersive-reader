# 📜 知乎沉浸阅读脚本 (Zhihu Immersive Reader)

## 📖 简介

> “一叶孤舟，一卷宣纸”。

本项目专为知乎深度阅读爱好者打造。一键将知乎繁杂的现代网页界面转化为极简、护眼、沉浸式的阅读环境。摒弃一切引流广告、侧边栏和视觉干扰，还你最纯粹的阅读心流。

🎉 **全新进化**：本项目现已从最初的单一“宣纸”模式，重磅升级为**多色护眼版（Multicolor）** 与**带翻译插件增强版**，满足您不同场景下的个性化阅读与学习需求！

⚡ **极客快捷体验**：全局监听专属快捷键（如 `Ctrl + E` 一键展卷/收卷，`T` 展开/收起翻译）。双手无需离开键盘，即可瞬间切换沉浸模式、隐藏悬浮按钮或呼出 AI 翻译面板，让你的阅读体验丝滑如飞，保持绝对专注！

---

## 📥 版本选择与下载

您可以根据自己的阅读偏好，选择最适合的版本进行安装：

- **🌍 V3.1 翻译插件增强版 (Translation) —— [🌟推荐]**
  专为语言学习者打造。在沉浸阅读的基础上，无缝集成大模型翻译功能。**无需安装额外的翻译插件**，只需填入你的 LLM API Key，即可获得精准的多语言翻译。
  **完美的语言过渡平台**：知乎平台是简体中文母语者的平台。借助 zhihu-xuanzhi-mode，让你先在熟悉的母语文化语境中，沉浸式学习外语里“具身化 (Embodied)”的词汇与地道表达。
  👉 [获取翻译插件版](https://github.com/connectedGraph/zhihu-xuanzhi-mode/releases/tag/v3.1)

- **🌈 最新多色护眼版 (Multicolor)**
  内置多种精心调教的主题配色（如宣纸、竹简、羊皮纸、暗夜模式等），支持自由切换，适应不同环境光线。
  👉 [获取多色护眼版](https://github.com/connectedGraph/zhihu-xuanzhi-mode/releases/tag/v2-multicolor)

- **📜 经典单色宣纸版 (Classic v1.0)**
  最初的感动。仅保留最经典的“旧麻布+朱砂红”古风视觉，代码极致轻量，功能直接简约，适合追求绝对纯净的极简主义者。
  👉 [获取经典初版](https://github.com/connectedGraph/zhihu-xuanzhi-mode/releases/tag/v1-xuanzhi)

---

## ✨ v3 版本核心特性

- **🎨 沉浸视觉体验**：无论是新版的多色主题，还是经典的低对比度旧麻布背景（`#E5DEC9`）与宣纸主轴（`#F8F4E6`），均经过匠心调色，极大缓解长时间阅读的视觉疲劳。
- **🌍 外文阅读辅助**：带翻译插件版本打破语言壁垒，让知乎外文文献阅读如履平地。
- **⚡ 毫秒级无缝热插拔**：支持随时进入/退出沉浸模式，**无需刷新页面**，完美保留当前的阅读进度和滚动条位置。
- **🛡️ 完美兼容原生功能**：保留知乎的“操作栏”（点赞、收藏）与“目录”功能。原目录按钮化身为右上角的古风方印，不仅美观，且完整保留原生点击交互逻辑。
- **⌨️ 极客快捷键**：见文末版本细节详情。
- **🧹 智能垃圾清理**：自动腰斩文章底部的引流推荐、文中植入的牛皮癣广告与购物卡片。

---

## 🚀 使用说明

### 方法一：控制台临时体验

1. 在知乎文章或回答页面，按 `F12` 打开开发者工具。
2. 切换到 `Console` (控制台) 面板。
3. 复制对应版本的脚本代码并回车粘贴，页面将瞬间“展卷”。

### 方法二：油猴脚本安装（推荐长期使用）

1. 在浏览器安装扩展插件 `Tampermonkey`（油猴）。
2. 点击新建脚本，将您所选版本的代码粘贴进去。
3. 设置匹配网址为 `*://*.zhihu.com/*`，保存即可生效。

---

## 🕹️ 交互指南

- **展卷/收卷**：键盘按下 `Ctrl + E` (或 `Cmd + E`)。
- **切换主题**：点击侧边栏/底部的【主题切换】按钮（仅限 Multicolor 版本）。
- **退出沉浸**：点击屏幕左下角的【退出沉浸】按钮。
- **查看目录**：点击屏幕右上角的【红色方印】图标（仅当原文章/回答包含目录时出现）。

---

## 💡 v3 版本核心机制细节与特别提示

为了让您获得最极致的体验，在使用前请了解以下核心机制与设定：

- **💾 本地化安全存储**：您的 API Key、模型选择、目标翻译语言等所有个性化配置，均通过浏览器的 `localStorage` 自动保存在本地。即插即用，且绝无隐私泄露风险。
- **🧠 上下文感知翻译与 API 兼容**：
    - **连贯性保障**：为确保翻译的地道与流畅，每次触发段落翻译时，脚本会隐式导入“AI 全文总结”作为上下文参考。单次翻译的 Token 消耗量级约为 `n + 100` tokens（含提示词）。划词翻译则会附带当前段落的原文，单次查词消耗也较大，你可以在设置中选择是否关闭该功能。
    - **接口要求**：目前 API 通讯**仅支持兼容 OpenAI 格式**的接口。若您使用的是非兼容模型（如 Claude、Gemini 原生接口），请配合使用 API 中转站（Relay）或选择提供兼容接口的云厂商服务。
- **⌨️ 全局快捷键加持**：专为“双手不离键盘”的极客打造：
    - **`Ctrl + E` / `Cmd + E`**：一键展卷 / 收卷（瞬间切换沉浸模式）。
    - **`Ctrl + H` / `Cmd + H`**：显示 / 隐藏 两侧浮动操作按钮，适合截图或进入绝对心流状态。
    - **`T`**：快速展开 / 收起 翻译解析面板。
- **🎯 生效范围限定**：好钢用在刀刃上。**本项目所有版本**目前均严格限定仅在**知乎文章页** (`https://zhuanlan.zhihu.com/p/*`) 触发并处理。其他如知乎主页、热榜、问答页、专栏目录或个人主页等，均不在脚本处理范围内，不影响您的日常冲浪。
- **🖨️ 优雅的 PDF 导出适配**：我们对浏览器的打印 API 进行了深度优化。在沉浸模式下直接按下 `Ctrl + P` (或 `Cmd + P`)，即可一键将您当前所选主题（如宣纸、暗黑）下的纯净文章，导出为高质量的图片型 PDF 文件。底层更是尽可能全面地实现了**分页防切断机制**，确保段落、公式与图片、特殊卡片的完整连贯。
- **⚠️ 跨域请求**：本脚本使用了 `GM_xmlhttpRequest` 来绕过浏览器的跨域限制（CORS）请求 API，请确保在脚本管理器中授予了该权限。

---

## 📖 我的使用教程（工作流参考）

如何最大化发挥这个脚本的价值？以下是我个人的日常使用流，供你参考：

- **🧠 沉浸式外语与专业学习**：
  借助知乎算法为你推荐的优质外文或硬核科普文章作为“学习原材料”。开启翻译增强版，通过逐段的中英对照，深度拆解句法逻辑、专业术语与地道表达。强烈建议配合 Obsidian 等双链笔记软件，将高频生词与金句沉淀为个人的专属知识库。
- **🖨️ 高效的内容流转与重混**：
  得益于脚本对浏览器打印 API 的深度适配与精美的主题渲染，你可以直接按下 `Ctrl + P` 导出排版优雅的 PDF 或长图。这非常适合用于**合法的**跨平台知识分享（例如制作抖音图文、小红书读书笔记等），极大降低了二次排版的成本。
- **👀 无感抗疲劳冲浪**：
  在宣纸、竹简、暗黑等多种精心调配的主题间自由切换，有效打破长时间在知乎深度阅读带来的视觉与审美疲劳，保护视力。

---

## 🚀 未来方向 (Roadmap)

我们步履不停，未来计划在以下方向继续深耕：

- **全站沉浸化**：将现有的纯净阅读体验从单一的专栏文章页，平滑扩展至更广泛的知乎问答页 (`Question` 板块)。
- **🧩 ADHD（注意力缺陷）友好阅读模式**：
  致力于提供更具包容性的无障碍阅读体验。计划引入：更大的行与段落间距、高对比度模式、仿生阅读 (Bionic Reading) 文本加粗技巧、专注阅读尺、可视化进度条、ADHD 易读字体，以及将长段落进行“卡片化/渐进式”视觉分割，帮助注意力更容易集中。
- **接管原生直答（AI 赋能）**：
  计划拦截并禁用臃肿的“知乎直答”功能，将其替换为更轻量、更智能的内联弹窗 (Inline Popup)。未来可以直接在文中唤出 Google 搜索、Gemini AI 全文总结，或调用你自定义的 LLM API 进行深度追问。

---

## 💡 开发动机

- **只为取悦自己（Scratch my own itch）**：
  起初只是想完整走一遍用户脚本的开发流程。哪怕市面上已经有了各种去广告插件，有着“重复造轮子”的嫌疑，我也希望能亲手写出一款在排版质感和交互逻辑上，完全让自己感到舒适满意的阅读插件。
- **填补高度定制化的空白**：
  目前针对知乎的净化工具虽多，但真正专注于“深度长文阅读”，且将多主题美化、无缝热插拔与 AI 翻译完美聚合在一起的单一插件几乎没有。我希望它能成为深度阅读者们的一个高度定制化解法。
